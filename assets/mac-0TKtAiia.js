import{P as z,Q as R,R as $,S as N,e as I,T as A,U as F,V as W,W as V,f as U,X as L,c as w,o as f,w as s,Y as M,Z as H,n as O,v as r,l as P,$ as Y,a0 as j,_ as q,g as G,u as K,a as D,j as e,k as p,F as h,t as x,h as Q,s as X,E as Z,p as J,q as ee,x as te}from"./index-DfQF0oAB.js";import{E as le,a as ae,b as oe}from"./el-table-column-m8NSn2qB.js";import{b as E}from"./route-block-B_A1xBdJ.js";import"./merge-C2MlVkhO.js";import"./flatMap-CVVhbvnp.js";import"./map-B6unp2GH.js";import"./_baseEach-CSgP2OB4.js";const ne=z({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:R,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),se=N({name:"ElText"}),ie=N({...se,props:ne,setup(k){const u=k,i=I(),l=A(),o=F("text"),t=W(()=>[o.b(),o.m(u.type),o.m(l.value),o.is("truncated",u.truncated),o.is("line-clamp",!V(u.lineClamp))]),d=()=>{var n,m,g,_,c,C,b;if(Y().title)return;let a=!1;const S=((n=i.value)==null?void 0:n.textContent)||"";if(u.truncated){const v=(m=i.value)==null?void 0:m.offsetWidth,y=(g=i.value)==null?void 0:g.scrollWidth;v&&y&&y>v&&(a=!0)}else if(!V(u.lineClamp)){const v=(_=i.value)==null?void 0:_.offsetHeight,y=(c=i.value)==null?void 0:c.scrollHeight;v&&y&&y>v&&(a=!0)}a?(C=i.value)==null||C.setAttribute("title",S):(b=i.value)==null||b.removeAttribute("title")};return U(d),L(d),(n,m)=>(f(),w(P(n.tag),{ref_key:"textRef",ref:i,class:O(r(t)),style:H({"-webkit-line-clamp":n.lineClamp})},{default:s(()=>[M(n.$slots,"default")]),_:3},8,["class","style"]))}});var re=$(ie,[["__file","text.vue"]]);const ue=j(re),de={class:"SubmitBtnDiv"},B={__name:"mac",setup(k){let u=G().proxy;const i=I([]),l=K({Visible:!1,Data:{},Open:o=>{l.Data={...o},l.Visible=!0},Close:()=>{l.Visible=!1},Submit:async()=>{let o={...l.Data};if(!o.Name||o.Name.trim()==""){u.Util.Toast("名称不能为空","error");return}if(!(await u.Biz.Call("User_Mac_Update",o)).State)return;u.Util.Toast("操作成功");let d=i.value.findIndex(n=>n.Id==o.Id);i.value[d]=o,l.Close()}});return U(async()=>{if(!await u.Biz.AutoLogin())return;let o=await u.Biz.Call("User_Mac_GetList",{});o.State&&(i.value=o.Data)}),(o,t)=>{const d=ue,n=le,m=ae,g=oe,_=Z,c=J,C=X,b=ee,T=te;return f(),D(h,null,[e(g,{data:i.value,stripe:"",fit:""},{default:s(()=>[e(n,{prop:"State",label:"状态",width:"60"},{default:s(a=>[a.row.State?(f(),D(h,{key:1},[a.row.IsRuning===0?(f(),w(d,{key:0},{default:s(()=>t[5]||(t[5]=[p("离线",-1)])),_:1,__:[5]})):(f(),w(d,{key:1,type:"success"},{default:s(()=>t[6]||(t[6]=[p("在线",-1)])),_:1,__:[6]}))],64)):(f(),w(d,{key:0,type:"Info"},{default:s(()=>t[4]||(t[4]=[p("锁定",-1)])),_:1,__:[4]}))]),_:1}),e(n,{prop:"Code",label:"编码",width:"80"}),e(n,{prop:"Name",label:"名称",width:"120"},{default:s(a=>[e(m,{type:"primary",onClick:S=>r(l).Open(a.row)},{default:s(()=>[p(x(a.row.Name),1)]),_:2},1032,["onClick"])]),_:1}),e(n,{prop:"Title",label:"标题"},{default:s(a=>[e(m,{type:"primary",onClick:S=>r(l).Open(a.row)},{default:s(()=>[p(x(a.row.Title),1)]),_:2},1032,["onClick"])]),_:1}),e(n,{prop:"YesterdaySales",label:"昨日",width:"80",align:"right"}),e(n,{prop:"TodaySales",label:"今日",width:"80",align:"right"}),e(n,{prop:"WeeklySales",label:"本周",width:"80",align:"right"}),e(n,{prop:"MonthlySales",label:"本月",width:"80",align:"right"}),e(n,{prop:"TotalSales",label:"总销量",width:"80",align:"right"})]),_:1},8,["data"]),e(T,{modelValue:r(l).Visible,"onUpdate:modelValue":t[3]||(t[3]=a=>r(l).Visible=a),title:"修改名称",top:"30px"},{default:s(()=>[e(C,{model:r(l).Data,rules:o.rules,ref:"formRef","label-width":"120px"},{default:s(()=>[e(_,{label:"编码",prop:"Code"},{default:s(()=>[e(d,null,{default:s(()=>[p(x(r(l).Data.Code),1)]),_:1})]),_:1}),e(_,{label:"名称",prop:"Name"},{default:s(()=>[e(c,{modelValue:r(l).Data.Name,"onUpdate:modelValue":t[0]||(t[0]=a=>r(l).Data.Name=a)},null,8,["modelValue"])]),_:1}),e(_,{label:"标题",prop:"Name"},{default:s(()=>[e(c,{modelValue:r(l).Data.Title,"onUpdate:modelValue":t[1]||(t[1]=a=>r(l).Data.Title=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),Q("div",de,[e(b,{type:"primary",onClick:t[2]||(t[2]=a=>r(l).Submit(!1))},{default:s(()=>t[7]||(t[7]=[p("确定",-1)])),_:1,__:[7]}),e(b,{type:"danger",onClick:r(l).Close},{default:s(()=>t[8]||(t[8]=[p("取消",-1)])),_:1,__:[8]},8,["onClick"])])]),_:1},8,["modelValue"])],64)}}};typeof E=="function"&&E(B);const ye=q(B,[["__scopeId","data-v-f50d5d03"]]);export{ye as default};
