import{Z as z,$ as R,a0 as $,a1 as N,e as I,a2 as A,a3 as F,I as L,a4 as D,f as B,a5 as M,c as w,o as f,w as s,a6 as W,a7 as H,n as O,v as r,l as P,a8 as j,a9 as q,_ as G,g as K,u as Y,a as V,j as e,k as p,F as h,t as S,h as Z,s as J,E as Q,p as X,q as ee,x as te}from"./index-BunRc9Td.js";import{E as le,a as ae,b as oe}from"./el-table-column-DueULgtX.js";import{b as E}from"./route-block-B_A1xBdJ.js";import"./merge-B3kAysmI.js";import"./flatMap-CdBSh06G.js";import"./map-qs1JhLhH.js";import"./_baseEach-CsfdgPq3.js";const ne=z({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:R,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),se=N({name:"ElText"}),ie=N({...se,props:ne,setup(k){const u=k,i=I(),l=A(),o=F("text"),t=L(()=>[o.b(),o.m(u.type),o.m(l.value),o.is("truncated",u.truncated),o.is("line-clamp",!D(u.lineClamp))]),d=()=>{var n,m,g,_,c,C,b;if(j().title)return;let a=!1;const x=((n=i.value)==null?void 0:n.textContent)||"";if(u.truncated){const v=(m=i.value)==null?void 0:m.offsetWidth,y=(g=i.value)==null?void 0:g.scrollWidth;v&&y&&y>v&&(a=!0)}else if(!D(u.lineClamp)){const v=(_=i.value)==null?void 0:_.offsetHeight,y=(c=i.value)==null?void 0:c.scrollHeight;v&&y&&y>v&&(a=!0)}a?(C=i.value)==null||C.setAttribute("title",x):(b=i.value)==null||b.removeAttribute("title")};return B(d),M(d),(n,m)=>(f(),w(P(n.tag),{ref_key:"textRef",ref:i,class:O(r(t)),style:H({"-webkit-line-clamp":n.lineClamp})},{default:s(()=>[W(n.$slots,"default")]),_:3},8,["class","style"]))}});var re=$(ie,[["__file","text.vue"]]);const ue=q(re),de={class:"SubmitBtnDiv"},U={__name:"mac",setup(k){let u=K().proxy;const i=I([]),l=Y({Visible:!1,Data:{},Open:o=>{l.Data={...o},l.Visible=!0},Close:()=>{l.Visible=!1},Submit:async()=>{let o={...l.Data};if(!o.Name||o.Name.trim()==""){u.Util.Toast("名称不能为空","error");return}if(!(await u.Biz.Call("User_Mac_Update",o)).State)return;u.Util.Toast("操作成功");let d=i.value.findIndex(n=>n.Id==o.Id);i.value[d]=o,l.Close()}});return B(async()=>{if(!await u.Biz.AutoLogin())return;let o=await u.Biz.Call("User_Mac_GetList",{});o.State&&(i.value=o.Data)}),(o,t)=>{const d=ue,n=le,m=ae,g=oe,_=Q,c=X,C=J,b=ee,T=te;return f(),V(h,null,[e(g,{data:i.value,stripe:"",fit:""},{default:s(()=>[e(n,{prop:"State",label:"状态",width:"60"},{default:s(a=>[a.row.State?(f(),V(h,{key:1},[a.row.IsRuning===0?(f(),w(d,{key:0},{default:s(()=>t[5]||(t[5]=[p("离线",-1)])),_:1,__:[5]})):(f(),w(d,{key:1,type:"success"},{default:s(()=>t[6]||(t[6]=[p("在线",-1)])),_:1,__:[6]}))],64)):(f(),w(d,{key:0,type:"Info"},{default:s(()=>t[4]||(t[4]=[p("锁定",-1)])),_:1,__:[4]}))]),_:1}),e(n,{prop:"Code",label:"编码",width:"80"}),e(n,{prop:"Name",label:"名称",width:"120"},{default:s(a=>[e(m,{type:"primary",onClick:x=>r(l).Open(a.row)},{default:s(()=>[p(S(a.row.Name),1)]),_:2},1032,["onClick"])]),_:1}),e(n,{prop:"Title",label:"标题"},{default:s(a=>[e(m,{type:"primary",onClick:x=>r(l).Open(a.row)},{default:s(()=>[p(S(a.row.Title),1)]),_:2},1032,["onClick"])]),_:1}),e(n,{prop:"YesterdaySales",label:"昨日",width:"80",align:"right"}),e(n,{prop:"TodaySales",label:"今日",width:"80",align:"right"}),e(n,{prop:"WeeklySales",label:"本周",width:"80",align:"right"}),e(n,{prop:"MonthlySales",label:"本月",width:"80",align:"right"}),e(n,{prop:"TotalSales",label:"总销量",width:"80",align:"right"})]),_:1},8,["data"]),e(T,{modelValue:r(l).Visible,"onUpdate:modelValue":t[3]||(t[3]=a=>r(l).Visible=a),title:"修改名称",top:"30px"},{default:s(()=>[e(C,{model:r(l).Data,rules:o.rules,ref:"formRef","label-width":"120px"},{default:s(()=>[e(_,{label:"编码",prop:"Code"},{default:s(()=>[e(d,null,{default:s(()=>[p(S(r(l).Data.Code),1)]),_:1})]),_:1}),e(_,{label:"名称",prop:"Name"},{default:s(()=>[e(c,{modelValue:r(l).Data.Name,"onUpdate:modelValue":t[0]||(t[0]=a=>r(l).Data.Name=a)},null,8,["modelValue"])]),_:1}),e(_,{label:"标题",prop:"Name"},{default:s(()=>[e(c,{modelValue:r(l).Data.Title,"onUpdate:modelValue":t[1]||(t[1]=a=>r(l).Data.Title=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),Z("div",de,[e(b,{type:"primary",onClick:t[2]||(t[2]=a=>r(l).Submit(!1))},{default:s(()=>t[7]||(t[7]=[p("确定",-1)])),_:1,__:[7]}),e(b,{type:"danger",onClick:r(l).Close},{default:s(()=>t[8]||(t[8]=[p("取消",-1)])),_:1,__:[8]},8,["onClick"])])]),_:1},8,["modelValue"])],64)}}};typeof E=="function"&&E(U);const ye=G(U,[["__scopeId","data-v-f50d5d03"]]);export{ye as default};
